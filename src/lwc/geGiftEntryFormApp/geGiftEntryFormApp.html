<template>
    <template if:true={isReady}>
        <template if:true={isBatchMode}>
            <c-ge-batch-gift-entry-header
                    batch-id={recordId}
                    onbatchdryrun={handleBatchDryRun}
                    onedit={handleEditBatch}>
            </c-ge-batch-gift-entry-header>
            <br/>
        </template>

        <c-ge-form-renderer
                batch-id={recordId}
                onsubmit={handleSubmit}
                onsectionsretrieved={handleSectionsRetrieved}
                field-mappings-by-dev-name={fieldMappingsByDevName}
                default-template={defaultTemplate}
                onpermissionerror={handlePermissionErrors}
                ontogglemodal={handleReviewDonationsModal}>
        </c-ge-form-renderer>

        <template if:false={isPermissionError}>
            <template if:true={isBatchMode}>
                <c-ge-batch-gift-entry-table
                        batch-id={recordId}
                        onloaddata={handleLoadData}
                        field-mappings-by-dev-name={fieldMappingsByDevName}>
                </c-ge-batch-gift-entry-table>
            </template>
        </template>
    </template>
</template>